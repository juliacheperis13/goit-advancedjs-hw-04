{"version":3,"file":"commonHelpers.js","sources":["../src/js/helpers.js","../src/js/index.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst classes = {\n  hidden: 'hidden',\n};\n\nconst toggleVisibility = (element, isHidden) => {\n  if (isHidden) {\n    element.classList.add(classes.hidden);\n  } else {\n    element.classList.remove(classes.hidden);\n  }\n};\n\nconst showMessage = (text, isError) => {\n  if (isError) {\n    iziToast.error({\n      title: 'Error',\n      message: text,\n      position: 'topRight',\n    });\n  } else {\n    iziToast.success({\n      title: 'Success',\n      message: text,\n      position: 'topRight',\n    });\n  }\n};\n\nexport { toggleVisibility, showMessage };\n","import axios from 'axios';\nimport { toggleVisibility, showMessage } from './helpers.js';\n\nconst loadMoreButton = document.querySelector('.load-more-button');\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\n\nconst apiKy = '44510469-6a54537c1d88a141b8cb4f82a';\nconst baseUrl = 'https://pixabay.com/api/';\nconst paginationConfig = {\n  currentPage: 0,\n  itemsPerPage: 40,\n};\n\nsearchForm.addEventListener('submit', onFormSubmit);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nfunction getSearchQuery() {\n  return searchForm.elements.searchQuery.value.trim();\n}\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  paginationConfig.currentPage = 1;\n  const searchQuery = getSearchQuery();\n  gallery.innerHTML = '';\n  toggleVisibility(loadMoreButton, true);\n  if (!searchQuery) {\n    showMessage('Please fill in search query!', true);\n    return;\n  }\n  try {\n    const apiResponse = await getImages(searchQuery);\n    if (!apiResponse.hits.length) {\n      showMessage(\n        'Sorry, there are no images matching your search query. Please try again.',\n        true\n      );\n      toggleVisibility(loadMoreButton, true);\n      return;\n    } else {\n      showMessage(`Hooray! We found ${apiResponse.totalHits} images.`, false);\n      if (\n        paginationConfig.currentPage * paginationConfig.itemsPerPage >=\n        Math.min(apiResponse.total, apiResponse.totalHits)\n      ) {\n        toggleVisibility(loadMoreButton, true);\n      } else {\n        toggleVisibility(loadMoreButton, false);\n      }\n      gallery.insertAdjacentHTML('beforeend', buildGallery(apiResponse.hits));\n    }\n  } catch (error) {\n    showMessage('Something went wrong!', true);\n  }\n}\n\nasync function getImages(searchQuery) {\n  const queryString = new URLSearchParams({\n    page: paginationConfig.currentPage,\n    per_page: paginationConfig.itemsPerPage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    key: apiKy,\n    q: searchQuery,\n  });\n  const { data } = await axios.get(`${baseUrl}?${queryString}`);\n  return data;\n}\n\nasync function onLoadMore() {\n  try {\n    paginationConfig.currentPage = paginationConfig.currentPage + 1;\n    const searchQuery = getSearchQuery();\n    const apiResponse = await getImages(searchQuery);\n    if (\n      paginationConfig.currentPage * paginationConfig.itemsPerPage >=\n      Math.min(apiResponse.total, apiResponse.totalHits)\n    ) {\n      stopLoadMore();\n    }\n    gallery.insertAdjacentHTML('beforeend', buildGallery(apiResponse.hits));\n  } catch (error) {\n    showMessage('Something went wrong!', true);\n  }\n}\n\nfunction stopLoadMore() {\n  toggleVisibility(loadMoreButton, true);\n\n  if (gallery.children.length > 0) {\n    showMessage(\n      \"We're sorry, but you've reached the end of search results.\",\n      true\n    );\n  }\n}\n\nfunction buildGallery(images) {\n  return images\n    .map(({ previewURL, tags, likes, views, comments, downloads }) => {\n      return `\n   <div class=\"photo-card\">\n  <img\n    class=\"gallery-img\"\n    src=\"${previewURL}\"\n    alt=\"${tags}\"\n    width=\"240\"\n    height=\"140\"\n  />\n  <div class=\"info\">\n    <div class=\"info-item\">\n      <h3>Likes</h3>\n      <p>${likes}</p>\n    </div>\n    <div class=\"info-item\">\n      <h3>Views</h3>\n      <p>${views}</p>\n    </div>\n    <div class=\"info-item\">\n      <h3>Comments</h3>\n      <p>${comments}</p>\n    </div>\n    <div class=\"info-item\">\n      <h3>Downloads</h3>\n      <p>${downloads}</p>\n    </div>\n  </div>\n</div>`;\n    })\n    .join('');\n}\n"],"names":["classes","toggleVisibility","element","isHidden","showMessage","text","isError","iziToast","loadMoreButton","searchForm","gallery","apiKy","baseUrl","paginationConfig","onFormSubmit","onLoadMore","getSearchQuery","e","searchQuery","apiResponse","getImages","buildGallery","queryString","data","axios","stopLoadMore","images","previewURL","tags","likes","views","comments","downloads"],"mappings":"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"}